{"version":3,"sources":["webpack:///./src/assets/images/socialCard.gif","webpack:///./src/view/social-security/social-check/index.vue?313f","webpack:///src/view/social-security/social-check/index.vue","webpack:///./src/view/social-security/social-check/index.vue?db5d","webpack:///./src/view/social-security/social-check/index.vue","webpack:///./src/view/social-security/social-check/index.vue?1c2e"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","step","expression","staticClass","_v","attrs","socialCard","ref","url","$store","state","common","visibleTip","_e","CONSTANT","enableTestButton","nextStep","staticRenderFns","component"],"mappings":"8HAAAA,EAAOC,QAAU,IAA0B,sC,4CCA3C,IAAIC,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,MAAM,CAACE,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAoB,IAAbT,EAAIU,KAAYC,WAAW,gBAAgB,CAACP,EAAG,MAAM,CAACQ,YAAY,yBAAyB,CAACZ,EAAIa,GAAG,aAAaT,EAAG,MAAM,CAACQ,YAAY,2BAA2B,CAACR,EAAG,MAAM,CAACQ,YAAY,aAAaE,MAAM,CAAC,IAAM,GAAG,IAAMd,EAAIe,kBAAkBX,EAAG,SAAS,CAACE,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAoB,IAAbT,EAAIU,KAAYC,WAAW,eAAeK,IAAI,aAAaJ,YAAY,aAAaE,MAAM,CAAC,IAAMd,EAAIiB,OAASjB,EAAIkB,OAAOC,MAAMC,OAAOC,WAAyUrB,EAAIsB,KAAjUlB,EAAG,MAAM,CAACQ,YAAY,0CAA0C,CAACR,EAAG,YAAY,CAACU,MAAM,CAAC,KAAO,sBAAsB,KAAO,OAAO,aAAa,UAAwB,IAAbd,EAAIU,MAAcV,EAAIuB,SAASC,iBAAkBpB,EAAG,YAAY,CAACU,MAAM,CAAC,KAAO,uBAAuB,KAAO,QAAQ,gBAAgBd,EAAIyB,YAAYzB,EAAIsB,MAAM,MAC55BI,EAAkB,G,yDCyCtB,GACE,KAAF,mBACE,SAAF,kBACA,yBACI,WAAJ,eAFA,GAIA,4BACI,kBAAJ,oBACI,eAAJ,iBACI,eAAJ,oBAGE,KAZF,WAaI,MAAJ,CACM,WAAN,IACM,QAAN,KACM,KAAN,EACM,OAAN,KACM,IAAN,KAGE,QArBF,WAsBI,KAAJ,iBAEE,cAxBF,WAyBI,OAAJ,OAAI,CAAJ,wCACI,aAAJ,cACI,cAAJ,aACI,OAAJ,OAAI,CAAJ,8BAEE,QAAF,kBACA,mEADA,CAEI,SAFJ,WAGM,OAAN,OAAM,CAAN,wCACM,KAAN,6HACM,KAAN,OACM,IAAN,OAEM,EAAN,+BACA,2EACU,EAAV,8FACU,EAAV,kGAEA,MAEI,cAfJ,WAeM,IAAN,OACM,OAAN,OAAM,CAAN,uCACM,OAAN,OAAM,CAAN,oCAEQ,GADA,QAAR,gBACA,eACU,OAAV,OAAU,CAAV,qCACU,EAAV,6GACU,QAAV,qBACU,EAAV,OACU,IAAV,IAEU,EAAV,+BACA,2EACc,EAAd,8FACc,EAAd,kGAEA,UAEA,YACY,aAAZ,WACY,EAAZ,cAEU,EAAV,+BACY,OAAZ,OAAY,CAAZ,qBACc,UAAd,aACc,OAAd,UAEA,QAGM,OAAN,OAAM,CAAN,wBACQ,UAAR,aACQ,OAAR,YCvH6W,I,wBCQzWC,EAAY,eACd,EACA5B,EACA2B,GACA,EACA,KACA,WACA,MAIa,aAAAC,E,2CCnBf,yBAA4kB,EAAG","file":"static/js/chunk-76ae5490.12180978.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/img/socialCard.11b03349.gif\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.step === 1),expression:\"step === 1\"}]},[_c('div',{staticClass:\"kd-page-title textTop\"},[_vm._v(\" 社保卡识别 \")]),_c('div',{staticClass:\"kd-content-wrapper wrap\"},[_c('img',{staticClass:\"staticCard\",attrs:{\"alt\":\"\",\"src\":_vm.socialCard}})])]),_c('iframe',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.step === 2),expression:\"step === 2\"}],ref:\"iframeWrap\",staticClass:\"iframeWrap\",attrs:{\"src\":_vm.url}}),(!_vm.$store.state.common.visibleTip)?_c('div',{staticClass:\"kd-foot-button kd-foot-button-position\"},[_c('kd-button',{attrs:{\"icon\":\"kedaIcon-policework\",\"text\":\"返回首页\",\"type-class\":\"home\"}}),(_vm.step === 1 && _vm.CONSTANT.enableTestButton)?_c('kd-button',{attrs:{\"icon\":\"kedaIcon-circleright\",\"text\":\"测试下一步\",\"button-handle\":_vm.nextStep}}):_vm._e()],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div>\r\n\t\t<div v-show=\"step === 1\">\r\n\t\t\t<div class=\"kd-page-title textTop\">\r\n\t\t\t\t社保卡识别\r\n\t\t\t</div>\r\n\t\t\t<div class=\"kd-content-wrapper wrap\">\r\n\t\t\t\t<img\r\n\t\t\t\t\t\talt=\"\"\r\n\t\t\t\t\t\tclass=\"staticCard\"\r\n\t\t\t\t\t\t:src=\"socialCard\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<iframe\r\n\t\t\t\tv-show=\"step === 2\"\r\n\t\t\t\tclass=\"iframeWrap\"\r\n\t\t\t\tref=\"iframeWrap\"\r\n\t\t\t\t:src=\"url\"\r\n\t\t/>\r\n\t\t<div class=\"kd-foot-button kd-foot-button-position\" v-if=\"!$store.state.common.visibleTip\">\r\n\t\t\t<kd-button\r\n\t\t\t\t\ticon=\"kedaIcon-policework\"\r\n\t\t\t\t\ttext=\"返回首页\"\r\n\t\t\t\t\ttype-class=\"home\"\r\n\t\t\t/>\r\n\t\t\t<kd-button\r\n\t\t\t\t\tv-if=\"step === 1 && CONSTANT.enableTestButton\"\r\n\t\t\t\t\ticon=\"kedaIcon-circleright\"\r\n\t\t\t\t\ttext=\"测试下一步\"\r\n\t\t\t\t\t:button-handle=\"nextStep\"\r\n\t\t\t/>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapMutations } from 'vuex';\r\nimport { wsSend, wsOnMessage } from '@/utils/websocket';\r\n\r\nimport socialCard from '@/assets/images/socialCard.gif';\r\n\r\nexport default {\r\n    name: 'SocialCheckIndex',\r\n    computed: {\r\n        ...mapState('common', {\r\n            visibleTip: 'visibleTip'\r\n        }),\r\n        ...mapState('permanent', {\r\n            identifyWebSocket: 'identifyWebSocket',\r\n            lightWebSocket: 'lightWebSocket',\r\n            cardReaderType: 'cardReaderType'\r\n        })\r\n    },\r\n    data () {\r\n        return {\r\n            socialCard: socialCard,\r\n            clockId: null,\r\n            step: 1,\r\n            timeId: null,\r\n            url: ''\r\n        };\r\n    },\r\n    mounted () {\r\n        this.startReadCard();\r\n    },\r\n    beforeDestroy () {\r\n        wsSend(this.lightWebSocket, 'lightCtrl@B4:OFF');\r\n        clearTimeout(this.clockId);\r\n        clearInterval(this.timeId);\r\n        wsOnMessage(this.identifyWebSocket, null);\r\n    },\r\n    methods: {\r\n        ...mapMutations('common', ['setSteps', 'changeStep', 'changeTipPage']),\r\n        nextStep () {\r\n            wsSend(this.lightWebSocket, 'lightCtrl@B4:OFF');\r\n            this.url = this.CONSTANT.olinServer + '/gaytj/police/toIndex.do?aac003=%E6%9B%B9%E5%BF%97%E5%88%9A&aac999=&aac147=320222196811097290';\r\n            this.step = 2;\r\n            const self = this;\r\n\r\n            self.timeId = setInterval(() => {\r\n                if (self.$refs.iframeWrap.contentWindow.document.getElementsByClassName('warp')) {\r\n                    self.$refs.iframeWrap.contentWindow.document.getElementsByClassName('warp')[0].style.width = '100vw';\r\n                    self.$refs.iframeWrap.contentWindow.document.getElementsByClassName('warp')[0].style.height = '100vh';\r\n                }\r\n            }, 100);\r\n        },\r\n        startReadCard () {\r\n            wsSend(this.lightWebSocket, 'lightCtrl@B4:ON');\r\n            wsOnMessage(this.identifyWebSocket, (res) => {\r\n                console.log('社保卡读取：', res);\r\n                if (res && res.code === 1) {\r\n                    wsSend(this.lightWebSocket, 'lightCtrl@B4:OFF');\r\n                    this.url = this.CONSTANT.olinServer + '/gaytj/police/toIndex.do?' + 'aac003=' + res.result.Name + '&aac999=' + '&aac147=' + res.result.IdNum;\r\n                    console.log('前往社保地址：', this.url);\r\n                    this.step = 2;\r\n                    const self = this;\r\n\r\n                    self.timeId = setInterval(() => {\r\n                        if (self.$refs.iframeWrap.contentWindow.document.getElementsByClassName('warp')) {\r\n                            self.$refs.iframeWrap.contentWindow.document.getElementsByClassName('warp')[0].style.width = '100vw';\r\n                            self.$refs.iframeWrap.contentWindow.document.getElementsByClassName('warp')[0].style.height = '100vh';\r\n                        }\r\n                    }, 100);\r\n                } else {\r\n                    if (this.clockId) {\r\n                        clearTimeout(this.clockId);\r\n                        this.clockId = null;\r\n                    }\r\n                    this.clockId = setTimeout(() => {\r\n                        wsSend(this.identifyWebSocket, {\r\n                            directive: 'ReadSbCard',\r\n                            module: 'T10'\r\n                        });\r\n                    }, 2000);\r\n                }\r\n            });\r\n            wsSend(this.identifyWebSocket, {\r\n                directive: 'ReadSbCard',\r\n                module: 'T10'\r\n            });\r\n        }\r\n    }\r\n\r\n};\r\n\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n\t.textTop {\r\n\t\tmargin-top: 7vh;\r\n\t}\r\n\r\n\t.iframeWrap {\r\n\t\twidth: 100vw;\r\n\t\theight: 92.2vh;\r\n\t}\r\n\r\n\t.wrap {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\r\n\t\timg {\r\n\t\t\tmax-height: 80%;\r\n\t\t\tmax-width: 80%;\r\n\t\t}\r\n\t}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=469d776f&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=469d776f&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"469d776f\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=469d776f&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=469d776f&lang=scss&scoped=true&\""],"sourceRoot":""}