{"version":3,"sources":["webpack:///./src/assets/media/common/4.mp3","webpack:///./src/view/public/before-work/face-yitu.vue?165c","webpack:///./src/view/public/before-work/face-yitu.vue?1ef1","webpack:///src/view/public/before-work/face-yitu.vue","webpack:///./src/view/public/before-work/face-yitu.vue?f2b3","webpack:///./src/view/public/before-work/face-yitu.vue","webpack:///./src/view/public/before-work/contrast.vue?ab95","webpack:///./src/view/public/before-work/contrast.vue?4b08","webpack:///src/view/public/before-work/contrast.vue","webpack:///./src/view/public/before-work/contrast.vue?2f01","webpack:///./src/view/public/before-work/contrast.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","isShowCropper","_e","attrs","binocularCamera","ref","option","img","outputSize","outputType","info","canScale","autoCrop","autoCropWidth","autoCropHeight","fixed","_s","tip","staticRenderFns","component","identifyCard","identityPic","domProps","partyName","_m","res","result","respData","code"],"mappings":"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","file":"static/js/chunk-0792711e.49c327f7.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/4.c5ea0906.mp3\";","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./face-yitu.vue?vue&type=style&index=0&id=70491231&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./face-yitu.vue?vue&type=style&index=0&id=70491231&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"kd-page-title\"},[_vm._v(\" 人脸识别 \")]),_c('div',{staticClass:\"kd-content-wrapper wrap-info\"},[(!_vm.isShowCropper)?_c('div',{staticClass:\"imgAppear\"},[_c('img',{attrs:{\"src\":_vm.binocularCamera}})]):_vm._e(),(_vm.isShowCropper)?_c('div',{staticClass:\"vue-cropper-box\"},[_c('div',{staticClass:\"vue-cropper-content\"},[_c('vue-cropper',{ref:\"cropper\",attrs:{\"img\":_vm.option.img,\"output-size\":_vm.option.outputSize,\"output-type\":_vm.option.outputType,\"info\":_vm.option.info,\"can-scale\":_vm.option.canScale,\"auto-crop\":_vm.option.autoCrop,\"auto-crop-width\":_vm.option.autoCropWidth,\"auto-crop-height\":_vm.option.autoCropHeight,\"fixed\":_vm.option.fixed}})],1)]):_vm._e(),_c('div',{staticClass:\"text\"},[_vm._v(\" \"+_vm._s(_vm.tip)+\" \")])]),(_vm.openFailed)?_c('div',{staticClass:\"kd-foot-button kd-foot-button-position\"},[_c('kd-button',{attrs:{\"icon\":\"kedaIcon-policework\",\"text\":\"返回首页\",\"type-class\":\"home\"}})],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <div class=\"kd-page-title\">\r\n            人脸识别\r\n        </div>\r\n        <div class=\"kd-content-wrapper wrap-info\">\r\n            <div\r\n                v-if=\"!isShowCropper\"\r\n                class=\"imgAppear\"\r\n            >\r\n                <img :src=\"binocularCamera\">\r\n            </div>\r\n            <div\r\n                v-if=\"isShowCropper\"\r\n                class=\"vue-cropper-box\"\r\n            >\r\n                <div class=\"vue-cropper-content\">\r\n                    <vue-cropper\r\n                        ref=\"cropper\"\r\n                        :img=\"option.img\"\r\n                        :output-size=\"option.outputSize\"\r\n                        :output-type=\"option.outputType\"\r\n                        :info=\"option.info\"\r\n                        :can-scale=\"option.canScale\"\r\n                        :auto-crop=\"option.autoCrop\"\r\n                        :auto-crop-width=\"option.autoCropWidth\"\r\n                        :auto-crop-height=\"option.autoCropHeight\"\r\n                        :fixed=\"option.fixed\"\r\n                    />\r\n                </div>\r\n            </div>\r\n            <div class=\"text\">\r\n                {{ tip }}\r\n            </div>\r\n        </div>\r\n        <!-- vueCropper 剪裁图片实现-->\r\n        <div\r\n            class=\"kd-foot-button kd-foot-button-position\"\r\n            v-if=\"openFailed\"\r\n        >\r\n            <kd-button\r\n                icon=\"kedaIcon-policework\"\r\n                text=\"返回首页\"\r\n                type-class=\"home\"\r\n            />\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapMutations } from 'vuex';\r\nimport { VueCropper } from 'vue-cropper'; // 裁剪插件\r\nimport { wsSend, wsOnMessage } from '@/utils/websocket';\r\nimport { addPrefix } from '@/utils/tools';\r\nimport audioObj from '@/assets/media/common/4.mp3';\r\nimport { playAudio } from '../../../utils/media';\r\n\r\nexport default {\r\n    name: 'BeforeWorkFaceYitu',\r\n    components: { VueCropper },\r\n    computed: {\r\n        ...mapState('permanent', {\r\n            binocularWebSocket: 'binocularWebSocket'\r\n        })\r\n    },\r\n    data () {\r\n        return {\r\n            tip: '正在打开摄像头，请稍候......',\r\n            openFailed: false,\r\n            binocularCamera: '',\r\n            binocularCameraBlack: '',\r\n            isShowCropper: false,\r\n            // 裁剪组件的基础配置option\r\n            option: {\r\n                img: '', // 裁剪图片的地址\r\n                info: false, // 裁剪框的大小信息\r\n                outputSize: 0.9, // 裁剪生成图片的质量\r\n                outputType: 'jpeg', // 裁剪生成图片的格式\r\n                canScale: false, // 图片是否允许滚轮缩放\r\n                autoCrop: false, // 是否默认生成截图框\r\n                full: true\r\n                // fixed: true                    // 是否开启截图框宽高固定比例\r\n                // fixedNumber: [1, 1]              // 截图框的宽高比例\r\n            },\r\n            showObj: true,\r\n            audioObj: null\r\n        };\r\n    },\r\n    methods: {\r\n        ...mapMutations('common', ['setBinocularCamera', 'changeStep', 'changeTipPage']),\r\n        initFaceDevice () {\r\n            this.tip = '请正对摄像头，脸部置于框内保持不动';\r\n            wsOnMessage(this.binocularWebSocket, this.getImg);\r\n            wsSend(this.binocularWebSocket, {\r\n                module: 'YiTu',\r\n                directive: 'FaceDualCapture'\r\n            });\r\n        },\r\n        getImg (res) {\r\n            if (res && res.code === 1) {\r\n                if (res.directive === 'FaceDualCapture') {\r\n                    this.binocularCamera = addPrefix(res.result.visibleImage);\r\n                    this.binocularCameraBlack = addPrefix(res.result.infraredImage);\r\n                } else if (res.directive === 'ReOpen') {\r\n                    console.log('依图双目摄像头：', res);\r\n                    wsSend(this.binocularWebSocket, {\r\n                        module: 'YiTu',\r\n                        directive: 'FaceDualCapture'\r\n                    });\r\n                } else if (res.directive === 'OpenSuccess') {\r\n                    console.log('依图双目摄像头打开成功');\r\n                } else if (res.directive === 'FaceDualTip') {\r\n                    this.tip = res.result;\r\n                } else {\r\n                    console.log('依图双目完成拍摄');\r\n                    console.info('依图双目摄像头：', res);\r\n                    wsSend(this.binocularWebSocket, {\r\n                        module: 'YiTu',\r\n                        directive: 'Stop'\r\n                    });\r\n                    this.isShowCropper = true;\r\n                    this.tip = '拍照成功！';\r\n                    this.binocularCamera = addPrefix(res.result.visibleImage);\r\n                    this.option.img = this.binocularCamera;\r\n                    setTimeout(() => {\r\n                        this.onCubeImg();\r\n                    }, 2000);\r\n                }\r\n            } else {\r\n                console.log('依图双目摄像头：', res);\r\n\r\n                if (res.directive === 'ReOpen') {\r\n                    this.changeTipPage({\r\n                        message: '系统开小差了，请重试！',\r\n                        enableBack: true,\r\n                        backName: '重试'\r\n                    });\r\n                } else if (res.directive === 'FaceDualCapture') {\r\n                    wsSend(this.binocularWebSocket, {\r\n                        module: 'YiTu',\r\n                        directive: 'ReOpen'\r\n                    });\r\n                }\r\n            }\r\n        },\r\n        // 确定裁剪图片\r\n        onCubeImg () {\r\n            // 获取cropper的截图的base64 数据\r\n            this.$refs.cropper.getCropData((data) => {\r\n                // // 先将显示图片地址清空，防止重复显示\r\n                this.option.img = '';\r\n                // 将剪裁后的图片执行下一步传递\r\n                const photoSize = this.showPhotoSize(data);\r\n                console.log('裁剪后文件大小 --' + photoSize + 'KB');\r\n                this.setBinocularCamera(data);\r\n                window.document.onclick();\r\n                this.changeStep('down');\r\n            });\r\n            this.$refs.cropper.startCrop();\r\n        },\r\n        // 计算图片大小\r\n        showPhotoSize (str) {\r\n            let baseStr = str;\r\n            const tag = 'base64,';\r\n            baseStr = baseStr.substring(baseStr.indexOf(tag) + tag.length);\r\n            // 去掉‘=’\r\n            const eqTagIndex = baseStr.indexOf('=');\r\n            baseStr = eqTagIndex !== -1 ? baseStr.substring(0, eqTagIndex) : baseStr;\r\n            const strLen = baseStr.length;\r\n            return (strLen - (strLen / 8) * 2) / 1024;\r\n        }\r\n    },\r\n    mounted () {\r\n        this.audioObj = playAudio(audioObj);\r\n        this.audioObj.play();\r\n        this.initFaceDevice();\r\n    },\r\n    beforeDestroy () {\r\n        this.audioObj.destroy();\r\n        wsOnMessage(this.binocularWebSocket, null);\r\n        wsSend(this.binocularWebSocket, {\r\n            module: 'YiTu',\r\n            directive: 'Stop'\r\n        });\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .wrap-info {\r\n        .imgAppear {\r\n            display: flex;\r\n\r\n            img {\r\n                background: url(\"../../../assets/images/loading.gif\") center no-repeat;\r\n                margin: 0 1vw;\r\n                min-width: 225px;\r\n                height: 400px;\r\n            }\r\n        }\r\n\r\n        .text {\r\n            font-size: 2.8vh;\r\n            text-align: center;\r\n            margin-top: 1vh;\r\n        }\r\n\r\n        ::v-deep .cropper-view-box {\r\n            outline: none;\r\n        }\r\n\r\n        ::v-deep .crop-point {\r\n            visibility: hidden;\r\n        }\r\n\r\n        .vue-cropper-content {\r\n            width: 300px;\r\n            height: 300px;\r\n        }\r\n    }\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./face-yitu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./face-yitu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./face-yitu.vue?vue&type=template&id=70491231&scoped=true&\"\nimport script from \"./face-yitu.vue?vue&type=script&lang=js&\"\nexport * from \"./face-yitu.vue?vue&type=script&lang=js&\"\nimport style0 from \"./face-yitu.vue?vue&type=style&index=0&id=70491231&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"70491231\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contrast.vue?vue&type=style&index=0&id=fdf04284&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contrast.vue?vue&type=style&index=0&id=fdf04284&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"kd-page-title\"},[_vm._v(\"身份比对\")]),_c('div',{staticClass:\"kd-content-wrapper cardWrap\"},[_c('div',{staticClass:\"photoWrap\"},[_c('img',{staticClass:\"binocularCamera\",attrs:{\"src\":_vm.binocularCamera}}),_c('div',{staticClass:\"identityPic\"},[_c('img',{attrs:{\"src\":_vm.identifyCard.identityPic}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.identifyCard.partyName)}})])]),_vm._m(0)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"text\"},[_c('span',[_c('i',{staticClass:\"el-icon-loading\"}),_vm._v(\"正在进行身份比对，请耐心等待......\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <div class=\"kd-page-title\">身份比对</div>\r\n        <div class=\"kd-content-wrapper cardWrap\">\r\n            <div class=\"photoWrap\">\r\n                <img class=\"binocularCamera\" :src=\"binocularCamera\">\r\n                <div class=\"identityPic\">\r\n                    <img :src=\"identifyCard.identityPic\">\r\n                    <p v-html=\"identifyCard.partyName\"></p>\r\n                </div>\r\n            </div>\r\n            <div class=\"text\">\r\n\t\t\t\t<span><i class=\"el-icon-loading\"></i>正在进行身份比对，请耐心等待......</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapMutations } from 'vuex';\r\nimport { checkIdInfo } from '@/service/common';\r\nimport { cancelPrefix } from '@/utils/tools';\r\nimport { LOCATION_ID } from '@/constant/constant';\r\n\r\nexport default {\r\n    name: 'BeforeWorkContrast',\r\n    props: ['queryIdPhoto'],\r\n    computed: {\r\n        ...mapState('common', {\r\n            identifyCard: 'identifyCard',\r\n            binocularCamera: 'binocularCamera',\r\n            businessTypeCode: 'businessTypeCode'\r\n        }),\r\n        ...mapState('permanent', {\r\n            BUSINESS_EN_NAME_CODE: 'BUSINESS_EN_NAME_CODE'\r\n        })\r\n    },\r\n    methods: {\r\n        ...mapMutations('common', ['changeStep', 'changeTipPage']),\r\n        async checkPerson () {\r\n            if (!this.CONSTANT.disableContrast) {\r\n                let localContrast = this.CONSTANT.localContrast;\r\n                if (this.queryIdPhoto) {\r\n                    localContrast = true;\r\n                } else {\r\n                    if (this.businessTypeCode === this.BUSINESS_EN_NAME_CODE.idCardLose || this.businessTypeCode === this.BUSINESS_EN_NAME_CODE.idCardDestroy || this.businessTypeCode === this.BUSINESS_EN_NAME_CODE.idCardOverdue) {\r\n                        // todo 合肥损坏，遗失身份证的情况，只能输入身份证号，无对比功能\r\n                        this.changeStep('down');\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                if (!this.identifyCard.identityPic && this.CONSTANT.location === LOCATION_ID.yinchuan && this.CONSTANT.location === LOCATION_ID.zhongwei) {\r\n                    // todo 银川无身份证照片直接下一步\r\n                    this.changeStep('down');\r\n                    return;\r\n                }\r\n\r\n                if (localContrast && !this.identifyCard.identityPic) {\r\n                    // 启用本地认证对比，并且无身份证照片不需要对比功能\r\n                    this.changeStep('down');\r\n                    return;\r\n                }\r\n\r\n                const res = await checkIdInfo({\r\n                    sfzmhm: this.identifyCard.certNumber,\r\n                    xm: this.identifyCard.partyName,\r\n                    photo: cancelPrefix(this.binocularCamera),\r\n                    identityPic: this.queryIdPhoto ? cancelPrefix(this.queryIdPhoto) : cancelPrefix(this.identifyCard.identityPic),\r\n                    disableLoading: true\r\n                }, localContrast);\r\n                if (res && res.result && res.result.respData && res.result.respData.code === '0') {\r\n                    this.changeStep('down');\r\n                } else if (res) {\r\n                    this.changeTipPage({ message: '检测结果与身份证信息不匹配，请您重新检测…', imgName: 'imgTexts' });\r\n                }\r\n            } else {\r\n                this.changeStep('down');\r\n            }\r\n        }\r\n    },\r\n    async mounted () {\r\n        this.checkPerson();\r\n    }\r\n\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .cardWrap {\r\n        .photoWrap {\r\n            display: flex;\r\n            overflow: hidden;\r\n            width: 90%;\r\n            height: 70%;\r\n            justify-content: space-around;\r\n\r\n            .binocularCamera {\r\n                background: url(\"../../../assets/images/loading.gif\") center no-repeat;\r\n                height: 100%;\r\n            }\r\n\r\n            .identityPic {\r\n                width: 20%;\r\n                height: 100%;\r\n\r\n                img {\r\n                    background: url(\"../../../assets/images/loading.gif\") center no-repeat;\r\n                    width: 100%;\r\n                }\r\n\r\n                p {\r\n                    text-align: center;\r\n                }\r\n            }\r\n        }\r\n\r\n        .text {\r\n            margin-top: 3vh;\r\n            font-size: 2.8vh;\r\n            text-align: center;\r\n        }\r\n    }\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contrast.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contrast.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./contrast.vue?vue&type=template&id=fdf04284&scoped=true&\"\nimport script from \"./contrast.vue?vue&type=script&lang=js&\"\nexport * from \"./contrast.vue?vue&type=script&lang=js&\"\nimport style0 from \"./contrast.vue?vue&type=style&index=0&id=fdf04284&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fdf04284\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}