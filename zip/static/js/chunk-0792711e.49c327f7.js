(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0792711e"],{"29cc":function(e,t,i){},"3e9f":function(e,t,i){e.exports=i.p+"static/media/4.c5ea0906.mp3"},"897b":function(e,t,i){},"93f9":function(e,t,i){"use strict";var a=i("897b"),o=i.n(a);o.a},"943e":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"kd-page-title"},[e._v(" 人脸识别 ")]),i("div",{staticClass:"kd-content-wrapper wrap-info"},[e.isShowCropper?e._e():i("div",{staticClass:"imgAppear"},[i("img",{attrs:{src:e.binocularCamera}})]),e.isShowCropper?i("div",{staticClass:"vue-cropper-box"},[i("div",{staticClass:"vue-cropper-content"},[i("vue-cropper",{ref:"cropper",attrs:{img:e.option.img,"output-size":e.option.outputSize,"output-type":e.option.outputType,info:e.option.info,"can-scale":e.option.canScale,"auto-crop":e.option.autoCrop,"auto-crop-width":e.option.autoCropWidth,"auto-crop-height":e.option.autoCropHeight,fixed:e.option.fixed}})],1)]):e._e(),i("div",{staticClass:"text"},[e._v(" "+e._s(e.tip)+" ")])]),e.openFailed?i("div",{staticClass:"kd-foot-button kd-foot-button-position"},[i("kd-button",{attrs:{icon:"kedaIcon-policework",text:"返回首页","type-class":"home"}})],1):e._e()])},o=[],n=(i("c975"),i("5530")),r=i("2f62"),c=i("7e79"),s=i("b2eb"),u=i("b893"),p=i("3e9f"),d=i.n(p),b=i("541b"),l={name:"BeforeWorkFaceYitu",components:{VueCropper:c["VueCropper"]},computed:Object(n["a"])({},Object(r["d"])("permanent",{binocularWebSocket:"binocularWebSocket"})),data:function(){return{tip:"正在打开摄像头，请稍候......",openFailed:!1,binocularCamera:"",binocularCameraBlack:"",isShowCropper:!1,option:{img:"",info:!1,outputSize:.9,outputType:"jpeg",canScale:!1,autoCrop:!1,full:!0},showObj:!0,audioObj:null}},methods:Object(n["a"])({},Object(r["c"])("common",["setBinocularCamera","changeStep","changeTipPage"]),{initFaceDevice:function(){this.tip="请正对摄像头，脸部置于框内保持不动",Object(s["a"])(this.binocularWebSocket,this.getImg),Object(s["b"])(this.binocularWebSocket,{module:"YiTu",directive:"FaceDualCapture"})},getImg:function(e){var t=this;e&&1===e.code?"FaceDualCapture"===e.directive?(this.binocularCamera=Object(u["a"])(e.result.visibleImage),this.binocularCameraBlack=Object(u["a"])(e.result.infraredImage)):"ReOpen"===e.directive?(console.log("依图双目摄像头：",e),Object(s["b"])(this.binocularWebSocket,{module:"YiTu",directive:"FaceDualCapture"})):"OpenSuccess"===e.directive?console.log("依图双目摄像头打开成功"):"FaceDualTip"===e.directive?this.tip=e.result:(console.log("依图双目完成拍摄"),console.info("依图双目摄像头：",e),Object(s["b"])(this.binocularWebSocket,{module:"YiTu",directive:"Stop"}),this.isShowCropper=!0,this.tip="拍照成功！",this.binocularCamera=Object(u["a"])(e.result.visibleImage),this.option.img=this.binocularCamera,setTimeout((function(){t.onCubeImg()}),2e3)):(console.log("依图双目摄像头：",e),"ReOpen"===e.directive?this.changeTipPage({message:"系统开小差了，请重试！",enableBack:!0,backName:"重试"}):"FaceDualCapture"===e.directive&&Object(s["b"])(this.binocularWebSocket,{module:"YiTu",directive:"ReOpen"}))},onCubeImg:function(){var e=this;this.$refs.cropper.getCropData((function(t){e.option.img="";var i=e.showPhotoSize(t);console.log("裁剪后文件大小 --"+i+"KB"),e.setBinocularCamera(t),window.document.onclick(),e.changeStep("down")})),this.$refs.cropper.startCrop()},showPhotoSize:function(e){var t=e,i="base64,";t=t.substring(t.indexOf(i)+i.length);var a=t.indexOf("=");t=-1!==a?t.substring(0,a):t;var o=t.length;return(o-o/8*2)/1024}}),mounted:function(){this.audioObj=Object(b["a"])(d.a),this.audioObj.play(),this.initFaceDevice()},beforeDestroy:function(){this.audioObj.destroy(),Object(s["a"])(this.binocularWebSocket,null),Object(s["b"])(this.binocularWebSocket,{module:"YiTu",directive:"Stop"})}},m=l,h=(i("93f9"),i("2877")),C=Object(h["a"])(m,a,o,!1,null,"70491231",null);t["a"]=C.exports},beb8:function(e,t,i){"use strict";var a=i("29cc"),o=i.n(a);o.a},f5a9:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"kd-page-title"},[e._v("身份比对")]),i("div",{staticClass:"kd-content-wrapper cardWrap"},[i("div",{staticClass:"photoWrap"},[i("img",{staticClass:"binocularCamera",attrs:{src:e.binocularCamera}}),i("div",{staticClass:"identityPic"},[i("img",{attrs:{src:e.identifyCard.identityPic}}),i("p",{domProps:{innerHTML:e._s(e.identifyCard.partyName)}})])]),e._m(0)])])},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"text"},[i("span",[i("i",{staticClass:"el-icon-loading"}),e._v("正在进行身份比对，请耐心等待......")])])}],n=(i("96cf"),i("1da1")),r=i("5530"),c=i("2f62"),s=i("faf3"),u=i("b893"),p=i("2435"),d={name:"BeforeWorkContrast",props:["queryIdPhoto"],computed:Object(r["a"])({},Object(c["d"])("common",{identifyCard:"identifyCard",binocularCamera:"binocularCamera",businessTypeCode:"businessTypeCode"}),{},Object(c["d"])("permanent",{BUSINESS_EN_NAME_CODE:"BUSINESS_EN_NAME_CODE"})),methods:Object(r["a"])({},Object(c["c"])("common",["changeStep","changeTipPage"]),{checkPerson:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.CONSTANT.disableContrast){t.next=21;break}if(i=e.CONSTANT.localContrast,!e.queryIdPhoto){t.next=6;break}i=!0,t.next=9;break;case 6:if(e.businessTypeCode!==e.BUSINESS_EN_NAME_CODE.idCardLose&&e.businessTypeCode!==e.BUSINESS_EN_NAME_CODE.idCardDestroy&&e.businessTypeCode!==e.BUSINESS_EN_NAME_CODE.idCardOverdue){t.next=9;break}return e.changeStep("down"),t.abrupt("return");case 9:if(e.identifyCard.identityPic||e.CONSTANT.location!==p["l"].yinchuan||e.CONSTANT.location!==p["l"].zhongwei){t.next=12;break}return e.changeStep("down"),t.abrupt("return");case 12:if(!i||e.identifyCard.identityPic){t.next=15;break}return e.changeStep("down"),t.abrupt("return");case 15:return t.next=17,Object(s["a"])({sfzmhm:e.identifyCard.certNumber,xm:e.identifyCard.partyName,photo:Object(u["b"])(e.binocularCamera),identityPic:e.queryIdPhoto?Object(u["b"])(e.queryIdPhoto):Object(u["b"])(e.identifyCard.identityPic),disableLoading:!0},i);case 17:a=t.sent,a&&a.result&&a.result.respData&&"0"===a.result.respData.code?e.changeStep("down"):a&&e.changeTipPage({message:"检测结果与身份证信息不匹配，请您重新检测…",imgName:"imgTexts"}),t.next=22;break;case 21:e.changeStep("down");case 22:case"end":return t.stop()}}),t)})))()}}),mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.checkPerson();case 1:case"end":return t.stop()}}),t)})))()}},b=d,l=(i("beb8"),i("2877")),m=Object(l["a"])(b,a,o,!1,null,"fdf04284",null);t["a"]=m.exports}}]);
//# sourceMappingURL=chunk-0792711e.49c327f7.js.map